
@{
    Layout = null;
}
@model EF.Application.Model.Custom.c_Device

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link href="~/Content/common.css" rel="stylesheet" />
    <link href="~/Scripts/layui/css/layui.css" rel="stylesheet" />
    <link href="~/Content/style.css" rel="stylesheet" />
    <script src="~/Scripts/echarts/echarts.js"></script>
    <script src="~/Scripts/jquery-1.8.0.min.js"></script>
    <script src="/google/js/api.js"></script>
    <script src="/google/js/drawing.js"></script>
    <script src="/google/js/geometry.js"></script>
    <script src="/google/js/places.js"></script>
    <script src="/google/js/maplabel.js"></script>
    <script src="/google/js/visualization.js"></script>
    <script src="/Scripts/map/bigMap.js"></script>
    <style type="text/css">
        .button-group {
            width: 120px;
            height: 60px;
            position: relative;
            bottom: 0px;
            left: calc(100% - 120px);
            font-size: 12px;
            padding: 10px;
            z-index: 9999;
        }

        .sbtj_Map {
            width: 100%;
            height: 400px;
        }

        .button-group .divbtn {
            width: 40px;
            height: 40px;
            background-color: #0D9BF2;
            float: left;
            margin-left: 10px;
            border-radius: 3px;
            cursor: pointer;
        }

        .divbtn img {
            margin: 4px 0px 0px 4px;
        }
    </style>
</head>
<body>
    <blockquote class="layui-elem-quote layui-text">
        设备详情
    </blockquote>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">设备名称:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.deviceName, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">设备ID:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.TerminalId, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">设备大类:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.bigtypeName, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">设备小类:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.smalltypeName, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">SIM卡号:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.simNo, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">排序号:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.orderNo, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">安装人员:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.Installer, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">安装日期:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.InstallDate, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">生产厂家:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.manufacturer, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">供电或公司:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.ElectricName, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">所在线路:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.LineName, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">所在接头:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.JointName, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">经度:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.longitude, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">纬度:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.latitude, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">录入日期:</label>
            <div class="layui-input-inline">
                @Html.EditorFor(model => model.createTime, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">详细位置:</label>
        <div class="layui-input-block">
            @Html.EditorFor(model => model.localInstructions, new { htmlAttributes = new { @class = "layui-input", @readonly = "readonly" } })
        </div>
    </div>
    <div class="layui-form-item">
        <fieldset class="layui-elem-field site-demo-button" style="margin: 20px 0px 0px 20px;">
            <legend>地理位置</legend>
            <div class="sbtj_Map" id="mapDiv">
            </div>
        </fieldset>
    </div>
    @Html.HiddenFor(model => model.longitude)
    @Html.HiddenFor(model => model.latitude)

    <button class="layui-btn layui-btn-primary" style="margin:0px 0px 0px 20px" onclick="window.history.back()">返回</button>
    <script src="~/Scripts/layui/layui.js"></script>
    <script type="text/javascript">
        /*加载地图*/
        $(function () {
            var bigmaps = bigmap.prototype;
            var mapcontainer = document.getElementById("mapDiv");
            var map = bigmaps.init(mapOption, myOption, mapcontainer);
            var html = "<div class='button-group'><div class='divbtn' title='标注' id='drawPoint'><img src='/Images/map/sign.png' /></div><div class='divbtn' title='清除' id='clearPoint'><img src='/Images/map/clear.png' /></div></div>";
            $("#mapDiv").append(html);
            var lngobj = document.getElementById("longitude");
            var latobj = document.getElementById("latitude");
            markerOption.icon = "/Images/location.png";
            var draw_Manager;
            document.getElementById("drawPoint").addEventListener("click", function () {
                draw_Manager = bigmaps.addDraw(markerOption, polylineOption, polygonOption, rectangleOption, circleOption, drawOption, map);
                //开启绘点
                bigmaps.setDrawMarker(draw_Manager);
                //监听绘点
                bigmaps.setlistenDrawMarker(draw_Manager, latobj, lngobj);
            });

            document.getElementById("clearPoint").addEventListener("click", function () {
                //停止绘制
                bigmaps.setStopDraw(draw_Manager);
                //清除绘点
                bigmaps.clearDraw(arrayOption.markerArray);
                lngobj.value = null;
                latobj.value = null;
            });
            var x = $("#longitude").val();
            var y = $("#latitude").val();
            if (x && y) {
                markerOption.id = $("#TerminalId").val();
                var obj = { "position": { "lat": parseFloat(y), "lng": parseFloat(x) } };
                markerOption.position = obj.position;
                var marker = bigmaps.addMarker(markerOption, map);
                bigmaps.moveTo(map, x, y);
            }
        })

    </script>
</body>
</html>
